{% extends 'base.html.twig' %}
{% block javascripts %}
    {{parent()}}

    <script src="{{ asset('js/jquery-1.11.0.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('js/ajaxgrid.js') }}" type="text/javascript"></script>
{% endblock %}
{% block body %}

<!--start-breadcrumbs-->
<div class="breadcrumbs">
    <div class="container">
        <div class="breadcrumbs-main">
            <ol class="breadcrumb">
                <li><a href="">Home</a></li>
                <li class="active">List of products</li>
            </ol>
        </div>
    </div>
</div>
<!--end-breadcrumbs-->
<!--prdt-starts-->
<div class="product">
    <div class="container">
        <div class="account-top heading">
            <h2>Product list</h2>
        </div>
        <div id="entities-grid">

        </div>
        <div class="account-main">
            <a class="btn btn-info" href="{{ path('product_new') }}">Create a new product</a>
        </div>
    </div>
</div>

    {#<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>#}
    {#<script type="text/javascript" src="web/js/ajaxgrid.js"></script>#}
    <script type="text/javascript">
        var settings= {
            'dataURL':'http://127.0.0.1:8000/product/',
            'sortbyfield': 'id',
            'order': 'asc',
            'filterbyfield': 'null',
            'pattern': 'null',
            'page': '1'
        }

        document.addEventListener("DOMContentLoaded", function() {
            $("#entities-grid").ajaxGrid();
        });
        $("#entities-grid").on("keyup",".filter",function () {
            settings.filterbyfield=this.id;
            settings.pattern=this.value;
            settings.dataURL=generateURL();
            console.log(settings);
            $("#entities-grid").ajaxGrid('update',{'dataURL':settings.dataURL});
        });
        $("#entities-grid").on("click",".sortableColumn",function () {
            settings.sortbyfield=this.id;
            settings.order=!settings.order;
            settings.dataURL=generateURL();
            console.log(settings);
            $("#entities-grid").ajaxGrid('update',{'dataURL':settings.dataURL});
        });
        function next() {
            //...
        }
        function previous() {
            //...
        }
        function generateURL(){
           return "http://127.0.0.1:8000/product/ajax?sortbyfield="+settings.sortbyfield+"&order="+settings.order+
                   "&filterbyfield="+settings.filterbyfield+"&pattern="+settings.pattern+"&page="+settings.page;
        }
    </script>
{% endblock %}
